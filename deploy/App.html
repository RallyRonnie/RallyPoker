<!DOCTYPE html>
<html>
<head>
    <title>Rally Poker</title>

    <script type="text/javascript" src="/apps/2.0p5/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                Ext.define("RallyPokerApp",{extend:"Rally.app.App",componentCls:"app",layout:"fit",initComponent:function(){this.callParent(arguments),this.teamMembers={},this.ProjectStore=Ext.create("Rally.data.WsapiDataStore",{model:"Project",fetch:["TeamMembers"],filters:[{property:"ObjectID",value:this.getContext().getProject().ObjectID}],autoLoad:!0,listeners:{beforeload:function(store){this.getEl().mask("Loading...")},load:this._loadProjectStore,scope:this}})},launch:function(){this.add({xtype:"tabpanel",renderTo:document.body,tabBar:{orientation:"vertical"},tabPosition:"left",plain:!0,items:[{title:"Foo"},{title:"Bar",tabConfig:{title:"Custom Title",tooltip:"A button tooltip"}}]});var message=[this.getContext().getUser().ObjectID,16],encoded=this.TurnMessage.compile(message,this.Base62.encode),decoded=this.TurnMessage.decompile(encoded,this.Base62.decode);this.add({xtype:"component",html:message.join(" + ")+"<br />"+encoded+"<br />"+decoded.join(" + "),listeners:{afterrender:function(){Ext.create("Rally.ui.tooltip.ToolTip",{target:this.getEl(),html:"Click the gear to view it fullscreen!",closableOnce:!0,closeAction:"destroy",autoShow:!0,shadow:"drop"})}}})},Base62:function(){var chars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];return{encode:function(i){if(0===i)return"0";for(var s="";i>0;)s=chars[i%62]+s,i=Math.floor(i/62);return s},decode:function(a,b,c,d){for(b=c=(a===(/\W|_|^$/.test(a+="")||a))-1;d=a.charCodeAt(c++);)b=62*b+d-[,48,29,87][d>>5];return b}}}(),TurnMessage:function(){var sep=["/","&"];return{compile:function(M){var i,ln=M.unshift((new Date).getTime()),s="";for(i=0;ln>i;i++)s+=(sep[i]||sep[1])+(arguments[1]?arguments[1](M[i]):M[i]);return s},decompile:function(s){var r=RegExp("^"+sep[0]+"\\w+(?:"+sep[1]+"\\w+)+$");if(!r.test(s))return!1;var M=s.slice(1).split(sep[1]);if(arguments[1]){var i,ln=M.length;for(i=0;ln>i;i++)M[i]=arguments[1](M[i])}return M}}}(),_loadProjectStore:function(store,result,success){if(success){for(var t=result[0].data.TeamMembers,uid,i=0;t.length>i;i++)uid=t[i]._ref.match(/\d+$/)[0],this.teamMembers[uid]=t[i];var welcome="You are a "+(this.teamMembers.hasOwnProperty(this.getContext().getUser().ObjectID)?"Pig. Oink, oink.":"Chicken. Try harder!");this.add({xtype:"component",html:welcome}),this.getEl().unmask()}},_loadDiscussionStore:function(store,result,success){}});

            Rally.launchApp('RallyPokerApp', {
                name:"Rally Poker",
	            parentRepos:""
            });

        });
    </script>


    <style type="text/css">
        .app {
     /* Add app styles here */
}

    </style>
</head>
<body></body>
</html>
